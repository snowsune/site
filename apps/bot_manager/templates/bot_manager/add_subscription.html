{% extends "base.html" %}

{% block content %}
<h1>Add New Subscription</h1>

<a href="{% url 'bot_manager_dashboard' %}">‚Üê Back to Dashboard</a>

{% if messages %}
{% for message in messages %}
<div class="alert alert-{{ message.tags }}">{{ message }}</div>
{% endfor %}
{% endif %}

<form method="post">
    {% csrf_token %}

    <div class="form-group">
        <label for="service_type">Service Type:</label>
        <select name="service_type" id="service_type" required>
            <option value="">Select a service</option>
            {% for value, label in service_choices %}
            <option value="{{ value }}">{{ label }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="user_id">User ID:</label>
        <input type="number" name="user_id" id="user_id" required>
    </div>

    <div class="form-group">
        <label for="guild_id">Guild ID:</label>
        <select name="guild_id" id="guild_id" required>
            <option value="">Select a guild</option>
            {% for guild in shared_guilds %}
            <option value="{{ guild.id }}">{{ guild.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="channel_id">Channel ID:</label>
        <input type="number" name="channel_id" id="channel_id" required>
    </div>

    <div class="form-group">
        <label for="search_criteria">Search Criteria:</label>
        <input type="text" name="search_criteria" id="search_criteria" required maxlength="255">
    </div>

    <div class="form-group">
        <label for="filters">Filters (optional):</label>
        <textarea name="filters" id="filters" rows="3"></textarea>
    </div>

    <div class="form-group">
        <label>
            <input type="checkbox" name="is_pm"> Send as PM
        </label>
    </div>

    <button type="submit">Add Subscription</button>
</form>
{% endblock %}